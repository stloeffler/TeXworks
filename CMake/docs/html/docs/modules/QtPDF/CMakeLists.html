<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>[TeXworks] modules/QtPDF/CMakeLists.txt</title>
  <!-- In the future, this needs to be replaced with something that comes from the official TeXworks repository, but we currently have no good alternative to http://sharpie.github.io/TeXworks/resources/docs.css, thus keep it. -->
  <link rel="stylesheet" type="text/css" href="../../../resources/docs.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>

  <!-- Navbar -->
  <div id="fadeout"></div>
  <div id="flybar">
    <a id="title" href="#top"><h1>modules/QtPDF/CMakeLists.txt</h1></a>

    <div class="navigation about">
      <div class="button">
        About
      </div>
      <div class="contents">
        <p>This documentation was built using Ryan Tomayko's <strong>Rocco</strong> tool:</p>
        <a href="http://rtomayko.github.io/rocco/">rtomayko.github.io/rocco/</a>

        <p>Which is based on <strong>Docco</strong> by Jeremy Ashkenas:</p>
        <a href="http://jashkenas.github.io/docco/">jashkenas.github.io/docco/</a>

        <p>The code from this navigation bar was borrowed from the <strong>CoffeeScript</strong> project, also by Jeremy:</p>
        <a href="http://coffeescript.org/">coffeescript.org</a>

        <p>The templates used to create this page may be found on GitHub:</p>
        <a href="https://github.com/TeXworks/texworks/tree/master/CMake/docs">github.com/TeXworks/texworks</a>

      </div>
    </div>

    <div class="navigation toc">
      <div class="button">
        Browse Source
      </div>
      <div class="contents menu">
          <a class="source" href="../../CMake/packaging/CMakeLists.html">CMake/packaging/CMakeLists.txt</a>
          <a class="source" href="../../CMake/packaging/mac/MacPackagingTasks.cmake.html">CMake/packaging/mac/MacPackagingTasks.cmake.in</a>
          <a class="source" href="../../CMakeLists.html">CMakeLists.txt</a>
          <a class="source" href="../CMakeLists.html">modules/CMakeLists.txt</a>
          <a class="source" href="CMakeLists.html">modules/QtPDF/CMakeLists.txt</a>
          <a class="source" href="../../plugins-src/TWLuaPlugin/CMakeLists.html">plugins-src/TWLuaPlugin/CMakeLists.txt</a>
          <a class="source" href="../../plugins-src/TWPythonPlugin/CMakeLists.html">plugins-src/TWPythonPlugin/CMakeLists.txt</a>
          <a class="source" href="../../src/CMakeLists.html">src/CMakeLists.txt</a>
      </div>
    </div>
    <div id="error" style="display:none;"></div>
  </div>

  <!-- Content -->
  <span class="bookmark" id="top"></span>

  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1>modules/QtPDF/CMakeLists.txt</h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Setup_and_User_Options">&#182;</a>
          <span class="bookmark" id="section-Setup_and_User_Options"></span>
        </div>
        <h1>Setup and User Options</h1>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-2">&#182;</a>
          <span class="bookmark" id="section-2"></span>
        </div>
        <p>Set project name.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">PROJECT</span><span class="p">(</span><span class="s">QtPDF</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-3">&#182;</a>
          <span class="bookmark" id="section-3"></span>
        </div>
        <p>We require CMake v2.8 or greater because we don&#39;t do any testing with earlier
versions.
In CMake v2.8.6, the AUTOMOC feature was introduced which simplifies the
interaction with Qt.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">CMAKE_MINIMUM_REQUIRED</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">2.8.6</span><span class="p">)</span>
<span class="nb">CMAKE_POLICY</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">2.8.6</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-4">&#182;</a>
          <span class="bookmark" id="section-4"></span>
        </div>
        <p>Silence warning about linking to qtmain.lib statically on Windows</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">IF</span><span class="p">(</span><span class="s">POLICY</span> <span class="s">CMP0020</span><span class="p">)</span>
  <span class="nb">cmake_policy</span><span class="p">(</span><span class="s">SET</span> <span class="s">CMP0020</span> <span class="s">NEW</span><span class="p">)</span>
<span class="nb">ENDIF</span><span class="p">()</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-5">&#182;</a>
          <span class="bookmark" id="section-5"></span>
        </div>
        <p>Silence warning about using @rpath on OS X.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">if</span><span class="p">(</span><span class="s">POLICY</span> <span class="s">CMP0042</span><span class="p">)</span>
  <span class="nb">cmake_policy</span><span class="p">(</span><span class="s">SET</span> <span class="s">CMP0042</span> <span class="s">NEW</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>

<span class="nb">SET</span><span class="p">(</span><span class="s">CMAKE_COLOR_MAKEFILE</span> <span class="s">ON</span><span class="p">)</span>
<span class="nb">SET</span><span class="p">(</span><span class="s">CMAKE_AUTOMOC</span> <span class="s">TRUE</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-6">&#182;</a>
          <span class="bookmark" id="section-6"></span>
        </div>
        <p>Always add the current source and binary directories to the header include
path when compiling.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">SET</span><span class="p">(</span><span class="s">CMAKE_INCLUDE_CURRENT_DIR</span> <span class="s">ON</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Determine_Version_Numbers">&#182;</a>
          <span class="bookmark" id="section-Determine_Version_Numbers"></span>
        </div>
        <h2>Determine Version Numbers</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">set</span><span class="p">(</span><span class="s">PROJECT_VERSION</span> <span class="s2">&quot;0.1&quot;</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Declare_Project_Options">&#182;</a>
          <span class="bookmark" id="section-Declare_Project_Options"></span>
        </div>
        <h2>Declare Project Options</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-9">&#182;</a>
          <span class="bookmark" id="section-9"></span>
        </div>
        <p>For now, default to a debug build.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">IF</span> <span class="p">(</span> <span class="s">NOT</span> <span class="s">CMAKE_BUILD_TYPE</span> <span class="p">)</span>
  <span class="nb">SET</span><span class="p">(</span><span class="s">CMAKE_BUILD_TYPE</span> <span class="s2">&quot;Debug&quot;</span><span class="p">)</span>
<span class="nb">ENDIF</span> <span class="p">()</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-10">&#182;</a>
          <span class="bookmark" id="section-10"></span>
        </div>
        <p>By default, we build a shared lib...</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">IF</span> <span class="p">(</span> <span class="s">NOT</span> <span class="s">DEFINED</span> <span class="s">BUILD_SHARED_LIBS</span> <span class="p">)</span>
  <span class="nb">SET</span><span class="p">(</span><span class="s">BUILD_SHARED_LIBS</span> <span class="s">ON</span><span class="p">)</span>
<span class="nb">ENDIF</span> <span class="p">()</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-11">&#182;</a>
          <span class="bookmark" id="section-11"></span>
        </div>
        <p>...with poppler-qt...</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">IF</span> <span class="p">(</span> <span class="s">NOT</span> <span class="s">DEFINED</span> <span class="s">WITH_POPPLERQT</span> <span class="p">)</span>
  <span class="nb">SET</span><span class="p">(</span><span class="s">WITH_POPPLERQT</span> <span class="s">ON</span><span class="p">)</span>
<span class="nb">ENDIF</span> <span class="p">()</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-12">&#182;</a>
          <span class="bookmark" id="section-12"></span>
        </div>
        <p>...but without MuPDF</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">IF</span> <span class="p">(</span> <span class="s">NOT</span> <span class="s">DEFINED</span> <span class="s">WITH_MUPDF</span> <span class="p">)</span>
  <span class="nb">SET</span><span class="p">(</span><span class="s">WITH_MUPDF</span> <span class="s">OFF</span><span class="p">)</span>
<span class="nb">ENDIF</span> <span class="p">()</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-13">&#182;</a>
          <span class="bookmark" id="section-13"></span>
        </div>
        <p>...and the viewer programs</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">IF</span> <span class="p">(</span> <span class="s">NOT</span> <span class="s">DEFINED</span> <span class="s">QTPDF_VIEWER</span> <span class="p">)</span>
  <span class="nb">SET</span><span class="p">(</span><span class="s">QTPDF_VIEWER</span> <span class="s">ON</span><span class="p">)</span>
<span class="nb">ENDIF</span> <span class="p">()</span>

<span class="nb">OPTION</span><span class="p">(</span><span class="s">QTPDF_VIEWER</span> <span class="s2">&quot;Build PDF viewer application&quot;</span> <span class="o">${</span><span class="nv">QTPDF_VIEWER</span><span class="o">}</span><span class="p">)</span>

<span class="nb">OPTION</span><span class="p">(</span><span class="s">WITH_POPPLER</span> <span class="s2">&quot;Build Poppler Qt backend&quot;</span> <span class="o">${</span><span class="nv">WITH_POPPLERQT</span><span class="o">}</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-14">&#182;</a>
          <span class="bookmark" id="section-14"></span>
        </div>
        <p>MuPDF backend is a bit immature, so we don&#39;t bother with it by default right
now.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">OPTION</span><span class="p">(</span><span class="s">WITH_MUPDF</span> <span class="s2">&quot;Build MuPDF backend&quot;</span> <span class="o">${</span><span class="nv">WITH_MUPDF</span><span class="o">}</span><span class="p">)</span>


<span class="nb">OPTION</span><span class="p">(</span><span class="s">BUILD_SHARED_LIBS</span> <span class="s2">&quot;Build shared library&quot;</span> <span class="o">${</span><span class="nv">BUILD_SHARED_LIBS</span><span class="o">}</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Dependency_Configuration">&#182;</a>
          <span class="bookmark" id="section-Dependency_Configuration"></span>
        </div>
        <h1>Dependency Configuration</h1>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-16">&#182;</a>
          <span class="bookmark" id="section-16"></span>
        </div>
        <p>Make the contents of <code>CMake/Modules</code> available. Among other things, this
directory contains scripts that locate project components such as Poppler.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">LIST</span><span class="p">(</span><span class="s">APPEND</span> <span class="s">CMAKE_MODULE_PATH</span> <span class="o">${</span><span class="nv">PROJECT_SOURCE_DIR</span><span class="o">}</span><span class="s">/CMake/Modules</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Core_Components">&#182;</a>
          <span class="bookmark" id="section-Core_Components"></span>
        </div>
        <h2>Core Components</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">set</span><span class="p">(</span><span class="s">DESIRED_QT_VERSION</span> <span class="s2">&quot;&quot;</span> <span class="s">CACHE</span> <span class="s">STRING</span> <span class="s2">&quot;Pick a version of Qt to use: 4 or 5&quot;</span><span class="p">)</span>
<span class="nb">MARK_AS_ADVANCED</span><span class="p">(</span><span class="s">DESIRED_QT_VERSION</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-18">&#182;</a>
          <span class="bookmark" id="section-18"></span>
        </div>
        <p>Check for Qt5 by default (unless another Qt version was already found, e.g.,
by a parent project)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">IF</span> <span class="p">(</span><span class="s">DESIRED_QT_VERSION</span> <span class="s">MATCHES</span> <span class="s">5</span> <span class="s">OR</span> <span class="p">(</span><span class="s">NOT</span> <span class="s">DESIRED_QT_VERSION</span> <span class="s">AND</span> <span class="p">(</span><span class="s">QT_VERSION_MAJOR</span> <span class="s">MATCHES</span> <span class="s">5</span> <span class="s">OR</span> <span class="s">NOT</span> <span class="s">QT_VERSION_MAJOR</span><span class="p">)))</span>
  <span class="nb">find_package</span><span class="p">(</span><span class="s">Qt5Core</span> <span class="s">QUIET</span><span class="p">)</span>
  <span class="nb">find_package</span><span class="p">(</span><span class="s">Qt5Widgets</span> <span class="s">QUIET</span><span class="p">)</span>
  <span class="nb">find_package</span><span class="p">(</span><span class="s">Qt5Concurrent</span> <span class="s">QUIET</span><span class="p">)</span>
  <span class="nb">find_package</span><span class="p">(</span><span class="s">Qt5Xml</span> <span class="s">QUIET</span><span class="p">)</span>

  <span class="nb">IF</span><span class="p">(</span> <span class="o">${</span><span class="nv">CMAKE_BUILD_TYPE</span><span class="o">}</span> <span class="s">STREQUAL</span> <span class="s2">&quot;Debug&quot;</span> <span class="p">)</span>
    <span class="nb">find_package</span><span class="p">(</span><span class="s">Qt5Test</span> <span class="s">QUIET</span><span class="p">)</span>
  <span class="nb">ENDIF</span><span class="p">()</span>
  
  <span class="nb">IF</span><span class="p">(</span> <span class="s">WIN32</span> <span class="s">AND</span> <span class="s">NOT</span> <span class="s">BUILD_SHARED_LIBS</span> <span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-19">&#182;</a>
          <span class="bookmark" id="section-19"></span>
        </div>
        <p>For static Windows builds, we also need to pull in the Qt5 Platform
support library, which is not exposed to CMake properly, unfortunately</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nb">GET_TARGET_PROPERTY</span><span class="p">(</span><span class="s">QT_LIB_DIR</span> <span class="s2">&quot;${Qt5Widgets_LIBRARIES}&quot;</span> <span class="s">LOCATION</span><span class="p">)</span>
    <span class="nb">GET_FILENAME_COMPONENT</span><span class="p">(</span><span class="s">QT_LIB_DIR</span> <span class="s2">&quot;${QT_LIB_DIR}&quot;</span> <span class="s">PATH</span><span class="p">)</span>
    <span class="nb">FIND_LIBRARY</span><span class="p">(</span><span class="s">Qt5Platform_LIBRARIES</span> <span class="s">Qt5PlatformSupport</span>
      <span class="s">HINTS</span> <span class="s2">&quot;${QT_LIB_DIR}&quot;</span>
    <span class="p">)</span>
    <span class="nb">FIND_LIBRARY</span><span class="p">(</span><span class="s">Qt5QWindows_LIBRARIES</span> <span class="s">qwindows</span>
      <span class="s">HINTS</span> <span class="s2">&quot;${QT_LIB_DIR}/../plugins/platforms&quot;</span>
    <span class="p">)</span>
    <span class="nb">ADD_DEFINITIONS</span><span class="p">(</span><span class="s">-DSTATIC_QT5</span><span class="p">)</span>
  <span class="nb">ENDIF</span><span class="p">()</span>

  <span class="nb">IF</span><span class="p">(</span><span class="s">Qt5Core_FOUND</span> <span class="s">AND</span> <span class="s">Qt5Widgets_FOUND</span> <span class="s">AND</span> <span class="s">Qt5Concurrent_FOUND</span> <span class="s">AND</span> <span class="s">Qt5Core_FOUND</span> <span class="s">AND</span> <span class="p">(</span><span class="s">NOT</span> <span class="o">${</span><span class="nv">CMAKE_BUILD_TYPE</span><span class="o">}</span> <span class="s">STREQUAL</span> <span class="s2">&quot;Debug&quot;</span> <span class="s">OR</span> <span class="p">(</span><span class="s">Qt5Test_FOUND</span> <span class="s">AND</span> <span class="s">Qt5Xml_FOUND</span><span class="p">)))</span>
  	<span class="nb">SET</span><span class="p">(</span><span class="s">QT5_FOUND</span> <span class="s">TRUE</span><span class="p">)</span>
    <span class="nb">SET</span><span class="p">(</span><span class="s">QT_INCLUDE_DIR</span> <span class="s2">&quot;${Qt5Core_INCLUDE_DIRS} ${Qt5Widgets_INCLUDE_DIRS} ${Qt5Concurrent_INCLUDE_DIRS}&quot;</span><span class="p">)</span>
    <span class="nb">SET</span><span class="p">(</span><span class="s">QT_LIBRARIES</span> <span class="o">${</span><span class="nv">Qt5Core_LIBRARIES</span><span class="o">}</span> <span class="o">${</span><span class="nv">Qt5QWindows_LIBRARIES</span><span class="o">}</span> <span class="o">${</span><span class="nv">Qt5Platform_LIBRARIES</span><span class="o">}</span> <span class="o">${</span><span class="nv">Qt5Widgets_LIBRARIES</span><span class="o">}</span> <span class="o">${</span><span class="nv">Qt5Concurrent_LIBRARIES</span><span class="o">}</span> <span class="o">${</span><span class="nv">Qt5Core_LIBRARIES</span><span class="o">}</span> <span class="o">${</span><span class="nv">Qt5Xml_LIBRARIES</span><span class="o">}</span><span class="p">)</span>
    <span class="nb">SET</span><span class="p">(</span><span class="s">QT_TEST_LIBRARIES</span> <span class="o">${</span><span class="nv">Qt5Test_LIBRARIES</span><span class="o">}</span> <span class="o">${</span><span class="nv">Qt5Core_LIBRARIES</span><span class="o">}</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-20">&#182;</a>
          <span class="bookmark" id="section-20"></span>
        </div>
        <p>Note: Qt5 only sets Qt5Widgets<em>VERSION, etc., but not QT</em>VERSION_MAJOR,
etc. which is used here.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nb">string</span><span class="p">(</span><span class="s">REGEX</span> <span class="s">REPLACE</span> <span class="s2">&quot;^([0-9]+).*$&quot;</span> <span class="s2">&quot;\\1&quot;</span> <span class="s">QT_VERSION_MAJOR</span> <span class="s2">&quot;${Qt5Widgets_VERSION}&quot;</span><span class="p">)</span>
    <span class="nb">string</span><span class="p">(</span><span class="s">REGEX</span> <span class="s">REPLACE</span> <span class="s2">&quot;^[0-9]+\\.([0-9]+).*$&quot;</span> <span class="s2">&quot;\\1&quot;</span> <span class="s">QT_VERSION_MINOR</span>  <span class="s2">&quot;${Qt5Widgets_VERSION}&quot;</span><span class="p">)</span>
    <span class="nb">string</span><span class="p">(</span><span class="s">REGEX</span> <span class="s">REPLACE</span> <span class="s2">&quot;^[0-9]+\\.[0-9]+\\.([0-9]+).*$&quot;</span> <span class="s2">&quot;\\1&quot;</span> <span class="s">QT_VERSION_PATCH</span> <span class="s2">&quot;${Qt5Widgets_VERSION}&quot;</span><span class="p">)</span>
  <span class="nb">ENDIF</span><span class="p">()</span>
  </pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-21">&#182;</a>
          <span class="bookmark" id="section-21"></span>
        </div>
        <p>Define version-dependent wrappers</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nb">MACRO</span><span class="p">(</span><span class="s">QT_ADD_RESOURCES</span><span class="p">)</span>
    <span class="nb">QT5_ADD_RESOURCES</span><span class="p">(</span><span class="o">${</span><span class="nv">ARGV</span><span class="o">}</span><span class="p">)</span>
  <span class="nb">ENDMACRO</span><span class="p">(</span><span class="s">QT_ADD_RESOURCES</span><span class="p">)</span>
<span class="nb">ENDIF</span><span class="p">()</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-22">&#182;</a>
          <span class="bookmark" id="section-22"></span>
        </div>
        <p>If Qt5 is not found (or not desired), check for Qt4</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">IF</span> <span class="p">(</span><span class="s">DESIRED_QT_VERSION</span> <span class="s">MATCHES</span> <span class="s">4</span> <span class="s">OR</span> <span class="s">NOT</span> <span class="s">QT5_FOUND</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-23">&#182;</a>
          <span class="bookmark" id="section-23"></span>
        </div>
        <p>Declare Qt libraries required by this project.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nb">SET</span> <span class="p">(</span><span class="s">QT_COMPONENTS</span>
    <span class="s">QtCore</span>
    <span class="s">QtGui</span>
    <span class="s">QtXML</span>
  <span class="p">)</span>
  <span class="nb">IF</span><span class="p">(</span> <span class="o">${</span><span class="nv">CMAKE_BUILD_TYPE</span><span class="o">}</span> <span class="s">STREQUAL</span> <span class="s2">&quot;Debug&quot;</span> <span class="p">)</span>
    <span class="nb">LIST</span><span class="p">(</span><span class="s">APPEND</span> <span class="s">QT_COMPONENTS</span> <span class="s">QtTest</span><span class="p">)</span>
  <span class="nb">ENDIF</span><span class="p">()</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-24">&#182;</a>
          <span class="bookmark" id="section-24"></span>
        </div>
        <p>Locate Qt. <code>INCLUDE(UseQt4)</code> brings in a set of macros that helps us deal
with Qt-specific tasks such as compiling resources or running <code>moc</code>.</p>

<p>Qt 4.6.0 or newer is required for many pieces of functionality used in the
code.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nb">FIND_PACKAGE</span><span class="p">(</span><span class="s">Qt4</span> <span class="s">4.6.0</span> <span class="s">COMPONENTS</span> <span class="o">${</span><span class="nv">QT_COMPONENTS</span><span class="o">}</span> <span class="s">QUIET</span><span class="p">)</span>
  <span class="nb">INCLUDE</span><span class="p">(</span><span class="s">UseQt4</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-25">&#182;</a>
          <span class="bookmark" id="section-25"></span>
        </div>
        <p>TODO: QtTest is included in the list of &quot;normal&quot; libraries for debug builds.
Therefore, QT<em>TEST</em>LIBRARIES is not set here. Can we improve this somehow
(i.e., can we pull in QtTest only for programs that actually use it)?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-26">&#182;</a>
          <span class="bookmark" id="section-26"></span>
        </div>
        <p>Define version-dependent wrappers</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nb">MACRO</span><span class="p">(</span><span class="s">QT_ADD_RESOURCES</span><span class="p">)</span>
    <span class="nb">QT4_ADD_RESOURCES</span><span class="p">(</span><span class="o">${</span><span class="nv">ARGV</span><span class="o">}</span><span class="p">)</span>
  <span class="nb">ENDMACRO</span><span class="p">(</span><span class="s">QT_ADD_RESOURCES</span><span class="p">)</span>
<span class="nb">ENDIF</span><span class="p">()</span>

<span class="nb">IF</span> <span class="p">(</span><span class="s">NOT</span> <span class="s">QT4_FOUND</span> <span class="s">AND</span> <span class="s">NOT</span> <span class="s">QT5_FOUND</span><span class="p">)</span>
  <span class="nb">MESSAGE</span><span class="p">(</span><span class="s">FATAL_ERROR</span> <span class="s2">&quot;Could not find required Qt &gt;= 4.6. Please install Qt (see http://qt-project.org/) and/or adjust DESIRED_QT_VERSION.&quot;</span><span class="p">)</span>
<span class="nb">ENDIF</span><span class="p">()</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-27">&#182;</a>
          <span class="bookmark" id="section-27"></span>
        </div>
        <p>Expose the major version number of Qt to the preprocessor. This is necessary
to include the correct Qt headers (as QTVERSION is not defined before any Qt
headers are included)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">ADD_DEFINITIONS</span><span class="p">(</span><span class="s">-DQT_VERSION_MAJOR=</span><span class="o">${</span><span class="nv">QT_VERSION_MAJOR</span><span class="o">}</span><span class="p">)</span>


<span class="nb">FIND_PACKAGE</span><span class="p">(</span><span class="s">ZLIB</span> <span class="s">REQUIRED</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-28">&#182;</a>
          <span class="bookmark" id="section-28"></span>
        </div>
        <p>Aggregate library names and include directories into variables for easy
access.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">SET</span><span class="p">(</span><span class="s">QTPDF_INCLUDE_DIRS</span>
  <span class="o">${</span><span class="nv">QT_INCLUDE_DIR</span><span class="o">}</span>
  <span class="o">${</span><span class="nv">ZLIB_INCLUDE_DIR</span><span class="o">}</span>
  <span class="o">${</span><span class="nv">POPPLER_QT_INCLUDE_DIR</span><span class="o">}</span>
<span class="p">)</span>

<span class="nb">SET</span><span class="p">(</span><span class="s">QTPDF_LIBS</span>
  <span class="o">${</span><span class="nv">QT_LIBRARIES</span><span class="o">}</span>
  <span class="o">${</span><span class="nv">ZLIB_LIBRARIES</span><span class="o">}</span>
<span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Backend_Components">&#182;</a>
          <span class="bookmark" id="section-Backend_Components"></span>
        </div>
        <h2>Backend Components</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">IF</span><span class="p">(</span> <span class="s">WITH_POPPLERQT</span> <span class="p">)</span>

  <span class="nb">FIND_PACKAGE</span><span class="p">(</span><span class="s">Poppler</span> <span class="s">REQUIRED</span><span class="p">)</span>
  <span class="nb">LIST</span><span class="p">(</span><span class="s">APPEND</span> <span class="s">QTPDF_INCLUDE_DIRS</span> <span class="o">${</span><span class="nv">POPPLER_QT_INCLUDE_DIR</span><span class="o">}</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-30">&#182;</a>
          <span class="bookmark" id="section-30"></span>
        </div>
        <p>In case poppler is linked statically, its libs have to be given to the
linker <strong>first</strong> for some strange reason or symbols won&#39;t be properly
resolved. At least, this is the case with the MinGW linker.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nb">SET</span><span class="p">(</span><span class="s">QTPDF_LIBS</span> <span class="o">${</span><span class="nv">POPPLER_LIBRARIES</span><span class="o">}</span> <span class="o">${</span><span class="nv">QTPDF_LIBS</span><span class="o">}</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-31">&#182;</a>
          <span class="bookmark" id="section-31"></span>
        </div>
        <p>The only thing Poppler should need is the location of the include
directories in order to access header files. The library loader should be
able to find libfontconfig on standard search paths.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nb">IF</span> <span class="p">(</span> <span class="s">POPPLER_NEEDS_FONTCONFIG</span> <span class="p">)</span>
    <span class="nb">FIND_PACKAGE</span><span class="p">(</span><span class="s">Fontconfig</span> <span class="s">REQUIRED</span><span class="p">)</span>
    <span class="nb">LIST</span><span class="p">(</span><span class="s">APPEND</span> <span class="s">QTPDF_INCLUDE_DIRS</span> <span class="o">${</span><span class="nv">FONTCONFIG_INCLUDE_DIR</span><span class="o">}</span><span class="p">)</span>
  <span class="nb">ENDIF</span> <span class="p">()</span>

<span class="nb">ENDIF</span><span class="p">()</span>

<span class="nb">IF</span><span class="p">(</span> <span class="s">WITH_MUPDF</span> <span class="p">)</span>

  <span class="nb">FIND_PACKAGE</span><span class="p">(</span><span class="s">JPEG</span> <span class="s">REQUIRED</span><span class="p">)</span>
  <span class="nb">FIND_PACKAGE</span><span class="p">(</span><span class="s">Freetype</span> <span class="s">REQUIRED</span><span class="p">)</span>
  <span class="nb">FIND_PACKAGE</span><span class="p">(</span><span class="s">JBig2Dec</span> <span class="s">REQUIRED</span><span class="p">)</span>
  <span class="nb">FIND_PACKAGE</span><span class="p">(</span><span class="s">OpenJPEG</span> <span class="s">REQUIRED</span><span class="p">)</span>
  <span class="nb">FIND_PACKAGE</span><span class="p">(</span><span class="s">MuPDF</span> <span class="s">REQUIRED</span><span class="p">)</span>

  <span class="nb">LIST</span><span class="p">(</span><span class="s">APPEND</span> <span class="s">QTPDF_INCLUDE_DIRS</span>
    <span class="o">${</span><span class="nv">JPEG_INCLUDE_DIR</span><span class="o">}</span>
    <span class="o">${</span><span class="nv">FREETYPE_INCLUDE_DIR</span><span class="o">}</span>
    <span class="o">${</span><span class="nv">JBIG2DEC_INCLUDE_DIR</span><span class="o">}</span>
    <span class="o">${</span><span class="nv">OPENJPEG_INCLUDE_DIR</span><span class="o">}</span>
    <span class="o">${</span><span class="nv">MUPDF_INCLUDE_DIR</span><span class="o">}</span>
  <span class="p">)</span>

  <span class="nb">LIST</span><span class="p">(</span><span class="s">APPEND</span> <span class="s">QTPDF_LIBS</span>
    <span class="o">${</span><span class="nv">JPEG_LIBRARIES</span><span class="o">}</span>
    <span class="o">${</span><span class="nv">FREETYPE_LIBRARIES</span><span class="o">}</span>
    <span class="o">${</span><span class="nv">JBIG2DEC_LIBRARIES</span><span class="o">}</span>
    <span class="o">${</span><span class="nv">OPENJPEG_LIBRARIES</span><span class="o">}</span>
  <span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-32">&#182;</a>
          <span class="bookmark" id="section-32"></span>
        </div>
        <p>Since the MuPDF libraries are static libs, they have to be given to the
linker <strong>first</strong> for some strange reason or symbols won&#39;t be properly
resolved. At least, this is the case with the MinGW linker.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nb">SET</span><span class="p">(</span><span class="s">QTPDF_LIBS</span> <span class="o">${</span><span class="nv">MUPDF_LIBRARIES</span><span class="o">}</span> <span class="o">${</span><span class="nv">QTPDF_LIBS</span><span class="o">}</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-33">&#182;</a>
          <span class="bookmark" id="section-33"></span>
        </div>
        <p>setlocale() is necessary for the MuPDF backend (at least for locales not
using &#39;.&#39; as a decimal point)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nb">INCLUDE</span><span class="p">(</span> <span class="s">CheckIncludeFiles</span> <span class="p">)</span>
  <span class="nb">INCLUDE</span><span class="p">(</span> <span class="s">CheckFunctionExists</span> <span class="p">)</span>
  <span class="nb">CHECK_INCLUDE_FILES</span><span class="p">(</span><span class="s">locale.h</span> <span class="s">HAVE_LOCALE_H</span><span class="p">)</span>
  <span class="nb">CHECK_FUNCTION_EXISTS</span><span class="p">(</span><span class="s">setlocale</span> <span class="s">HAVE_SETLOCALE</span><span class="p">)</span>
  <span class="nb">IF</span><span class="p">(</span> <span class="s">HAVE_LOCALE_H</span> <span class="s">AND</span> <span class="s">HAVE_SETLOCALE</span> <span class="p">)</span>
    <span class="nb">ADD_DEFINITIONS</span><span class="p">(</span><span class="s">-DHAVE_LOCALE_H</span><span class="p">)</span>
  <span class="nb">ENDIF</span><span class="p">()</span>

<span class="nb">ENDIF</span><span class="p">()</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Update_Header_Templates">&#182;</a>
          <span class="bookmark" id="section-Update_Header_Templates"></span>
        </div>
        <h2>Update Header Templates</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Building">&#182;</a>
          <span class="bookmark" id="section-Building"></span>
        </div>
        <h1>Building</h1>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-36">&#182;</a>
          <span class="bookmark" id="section-36"></span>
        </div>
        <p>Common setup.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">INCLUDE_DIRECTORIES</span><span class="p">(</span>
  <span class="o">${</span><span class="nv">QTPDF_INCLUDE_DIRS</span><span class="o">}</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/backend</span>
<span class="p">)</span>

<span class="nb">IF</span><span class="p">(</span> <span class="o">${</span><span class="nv">CMAKE_BUILD_TYPE</span><span class="o">}</span> <span class="s">STREQUAL</span> <span class="s2">&quot;Debug&quot;</span> <span class="p">)</span>
  <span class="nb">ADD_DEFINITIONS</span><span class="p">(</span><span class="s">-DDEBUG</span> <span class="s">-DQT_NO_CAST_FROM_ASCII</span> <span class="s">-DQT_NO_CAST_TO_ASCII</span> <span class="s">-DQT_NO_CAST_FROM_BYTEARRAY</span><span class="p">)</span>
  <span class="nb">SET</span><span class="p">(</span><span class="s">CMAKE_CXX_FLAGS_DEBUG</span> <span class="s2">&quot;-g -Wall&quot;</span><span class="p">)</span>
<span class="nb">ENDIF</span><span class="p">()</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Library">&#182;</a>
          <span class="bookmark" id="section-Library"></span>
        </div>
        <h2>Library</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">SET</span><span class="p">(</span><span class="s">QTPDF_SRCS</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/PDFDocumentView.cpp</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/PDFDocumentWidget.cpp</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/PDFDocumentTools.cpp</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/PDFBackend.cpp</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/PDFTransitions.cpp</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/PDFActions.cpp</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/PDFAnnotations.cpp</span>
<span class="p">)</span>

<span class="nb">SET</span><span class="p">(</span><span class="s">QTPDF_HDRS</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/PDFDocumentView.h</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/PDFDocumentWidget.h</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/PDFDocumentTools.h</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/PDFBackend.h</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/PDFTransitions.h</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/PDFActions.h</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/PDFAnnotations.h</span>
<span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-38">&#182;</a>
          <span class="bookmark" id="section-38"></span>
        </div>
        <p>FIXME: Is -fPIC required/appropriate for all situations/platforms?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">IF</span><span class="p">(</span> <span class="s">NOT</span> <span class="s">WIN32</span> <span class="p">)</span>
  <span class="nb">SET</span><span class="p">(</span><span class="s">QTPDF_FLAGS</span> <span class="s2">&quot;-fPIC&quot;</span><span class="p">)</span>
<span class="nb">ENDIF</span><span class="p">()</span>

<span class="nb">IF</span><span class="p">(</span> <span class="s">WITH_POPPLERQT</span> <span class="p">)</span>
  <span class="nb">LIST</span><span class="p">(</span><span class="s">APPEND</span> <span class="s">QTPDF_SRCS</span> <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/backends/PopplerQtBackend.cpp</span><span class="p">)</span>
  <span class="nb">LIST</span><span class="p">(</span><span class="s">APPEND</span> <span class="s">QTPDF_HDRS</span> <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/backends/PopplerQtBackend.h</span><span class="p">)</span>
  <span class="nb">SET</span><span class="p">(</span><span class="s">QTPDF_FLAGS</span> <span class="s2">&quot;${QTPDF_FLAGS} -DUSE_POPPLERQT&quot;</span><span class="p">)</span>
<span class="nb">ENDIF</span><span class="p">()</span>

<span class="nb">IF</span><span class="p">(</span> <span class="s">WITH_MUPDF</span> <span class="p">)</span>
  <span class="nb">LIST</span><span class="p">(</span><span class="s">APPEND</span> <span class="s">QTPDF_SRCS</span> <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/backends/MuPDFBackend.cpp</span><span class="p">)</span>
  <span class="nb">LIST</span><span class="p">(</span><span class="s">APPEND</span> <span class="s">QTPDF_HDRS</span> <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/backends/MuPDFBackend.h</span><span class="p">)</span>
  <span class="nb">SET</span><span class="p">(</span><span class="s">QTPDF_FLAGS</span> <span class="s2">&quot;${QTPDF_FLAGS} -DUSE_MUPDF&quot;</span><span class="p">)</span>
<span class="nb">ENDIF</span><span class="p">()</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-39">&#182;</a>
          <span class="bookmark" id="section-39"></span>
        </div>
        <p>Create translations</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">INCLUDE</span><span class="p">(</span> <span class="s">TranslationMacros</span> <span class="p">)</span>
<span class="nb">FILE</span><span class="p">(</span><span class="s">GLOB</span> <span class="s">TRANSLATIONS_SOURCES</span> <span class="s">trans/*.ts</span><span class="p">)</span>
<span class="nb">FILE</span><span class="p">(</span><span class="s">GLOB</span> <span class="s">TRANSLATIONS_QM</span> <span class="s">trans/*.qm</span><span class="p">)</span>
<span class="nb">LIST</span><span class="p">(</span><span class="s">SORT</span> <span class="s">TRANSLATIONS_SOURCES</span><span class="p">)</span>
<span class="nb">QT_ADD_QM_TRANSLATIONS</span><span class="p">(</span><span class="s">QTPDF_QM</span> <span class="o">${</span><span class="nv">TRANSLATIONS_QM</span><span class="o">}</span><span class="p">)</span>

<span class="nb">CREATE_QT_PRO_FILE</span><span class="p">(</span><span class="s2">&quot;${CMAKE_CURRENT_SOURCE_DIR}/trans/QtPDF_trans.pro&quot;</span> <span class="s2">&quot;src&quot;</span> <span class="o">${</span><span class="nv">QTPDF_SRCS</span><span class="o">}</span> <span class="o">${</span><span class="nv">QTPDF_HDRS</span><span class="o">}</span> <span class="o">${</span><span class="nv">TRANSLATIONS_SOURCES</span><span class="o">}</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-40">&#182;</a>
          <span class="bookmark" id="section-40"></span>
        </div>
        <p>Icons</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">SET</span><span class="p">(</span><span class="s">QTPDF_RCS</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/QtPDF_icons.qrc</span>
<span class="p">)</span>
<span class="nb">QT_ADD_RESOURCES</span><span class="p">(</span><span class="s">QTPDF_RESOURCES</span> <span class="o">${</span><span class="nv">QTPDF_RCS</span><span class="o">}</span><span class="p">)</span>


<span class="nb">ADD_LIBRARY</span><span class="p">(</span><span class="s">qtpdf</span>
  <span class="o">${</span><span class="nv">QTPDF_SRCS</span><span class="o">}</span>
  <span class="o">${</span><span class="nv">QTPDF_RESOURCES</span><span class="o">}</span>
  <span class="o">${</span><span class="nv">QTPDF_QM</span><span class="o">}</span>
<span class="p">)</span>

<span class="nb">set</span><span class="p">(</span><span class="s">QTPDF_ADDITIONAL_LIBS</span> <span class="s2">&quot;&quot;</span> <span class="s">CACHE</span> <span class="s">STRING</span> <span class="s2">&quot;Additional libraries not found by CMake&quot;</span><span class="p">)</span>
<span class="nb">MARK_AS_ADVANCED</span><span class="p">(</span><span class="s">QTPDF_ADDITIONAL_LIBS</span><span class="p">)</span>

<span class="nb">TARGET_LINK_LIBRARIES</span><span class="p">(</span><span class="s">qtpdf</span> <span class="o">${</span><span class="nv">QTPDF_LIBS</span><span class="o">}</span> <span class="o">${</span><span class="nv">QTPDF_ADDITIONAL_LIBS</span><span class="o">}</span><span class="p">)</span>

<span class="nb">SET_TARGET_PROPERTIES</span><span class="p">(</span><span class="s">qtpdf</span> <span class="s">PROPERTIES</span>
  <span class="s">COMPILE_FLAGS</span> <span class="s2">&quot;${QTPDF_FLAGS}&quot;</span>
<span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-41">&#182;</a>
          <span class="bookmark" id="section-41"></span>
        </div>
        <p>Inform parent scope (if any) what to do to use QtPDF</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">SET</span><span class="p">(</span><span class="s">QTPDF_INCLUDE_DIRS</span> <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src</span> <span class="s">PARENT_SCOPE</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-42">&#182;</a>
          <span class="bookmark" id="section-42"></span>
        </div>
        <p>${CMAKE<em>CURRENT</em>SOURCE_DIR}/src/backend</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Viewers">&#182;</a>
          <span class="bookmark" id="section-Viewers"></span>
        </div>
        <h2>Viewers</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">IF</span> <span class="p">(</span> <span class="s">QTPDF_VIEWER</span> <span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-44">&#182;</a>
          <span class="bookmark" id="section-44"></span>
        </div>
        <p>Both viewers use a common set of source code files. Preprocessor definitions
toggle the backend-sensitive bits.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">SET</span><span class="p">(</span><span class="s">PDFVIEWER_SRCS</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/main.cpp</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/PDFViewer.cpp</span>
<span class="p">)</span>

<span class="nb">QT_ADD_RESOURCES</span><span class="p">(</span><span class="s">PDFVIEWER_RESOURCES</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/icons.qrc</span>
<span class="p">)</span>

<span class="nb">SET</span><span class="p">(</span><span class="s">QTPDFTEST_SRCS</span>
  <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/unit-tests/TestQtPDF.cpp</span>
<span class="p">)</span>



<span class="nb">IF</span><span class="p">(</span> <span class="s">WITH_POPPLERQT</span> <span class="p">)</span>
  <span class="nb">ADD_EXECUTABLE</span><span class="p">(</span><span class="s">poppler-qt</span><span class="o">${</span><span class="nv">QT_VERSION_MAJOR</span><span class="o">}</span><span class="s">_viewer</span>
    <span class="o">${</span><span class="nv">PDFVIEWER_SRCS</span><span class="o">}</span>
    <span class="o">${</span><span class="nv">PDFVIEWER_RESOURCES</span><span class="o">}</span>
  <span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-45">&#182;</a>
          <span class="bookmark" id="section-45"></span>
        </div>
        <p>NOTE:
Setting properties on a target sets those properties on all source files
that are built to create that target. Other targets can re-use the sources
and build with different flags. Pretty handy.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nb">SET_TARGET_PROPERTIES</span><span class="p">(</span><span class="s">poppler-qt</span><span class="o">${</span><span class="nv">QT_VERSION_MAJOR</span><span class="o">}</span><span class="s">_viewer</span> <span class="s">PROPERTIES</span>
    <span class="s">COMPILE_FLAGS</span> <span class="s2">&quot;-DUSE_POPPLERQT ${Qt5Widgets_EXECUTABLE_COMPILE_FLAGS}&quot;</span>
  <span class="p">)</span>

  <span class="nb">TARGET_LINK_LIBRARIES</span><span class="p">(</span><span class="s">poppler-qt</span><span class="o">${</span><span class="nv">QT_VERSION_MAJOR</span><span class="o">}</span><span class="s">_viewer</span> <span class="s">qtpdf</span><span class="p">)</span>

  <span class="nb">IF</span><span class="p">(</span> <span class="o">${</span><span class="nv">CMAKE_BUILD_TYPE</span><span class="o">}</span> <span class="s">STREQUAL</span> <span class="s2">&quot;Debug&quot;</span> <span class="p">)</span>
    <span class="nb">ADD_EXECUTABLE</span><span class="p">(</span><span class="s">poppler-qt</span><span class="o">${</span><span class="nv">QT_VERSION_MAJOR</span><span class="o">}</span><span class="s">_test</span>
      <span class="o">${</span><span class="nv">QTPDFTEST_SRCS</span><span class="o">}</span>
    <span class="p">)</span>
    <span class="nb">SET_TARGET_PROPERTIES</span><span class="p">(</span><span class="s">poppler-qt</span><span class="o">${</span><span class="nv">QT_VERSION_MAJOR</span><span class="o">}</span><span class="s">_test</span> <span class="s">PROPERTIES</span>
      <span class="s">COMPILE_FLAGS</span> <span class="s2">&quot;-DUSE_POPPLERQT ${Qt5Widgets_EXECUTABLE_COMPILE_FLAGS}&quot;</span>
      <span class="s">RUNTIME_OUTPUT_DIRECTORY</span> <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/unit-tests</span>
    <span class="p">)</span>
    <span class="nb">TARGET_LINK_LIBRARIES</span><span class="p">(</span><span class="s">poppler-qt</span><span class="o">${</span><span class="nv">QT_VERSION_MAJOR</span><span class="o">}</span><span class="s">_test</span> <span class="o">${</span><span class="nv">QT_TEST_LIBRARIES</span><span class="o">}</span> <span class="s">qtpdf</span><span class="p">)</span>
  <span class="nb">ENDIF</span><span class="p">()</span>
<span class="nb">ENDIF</span><span class="p">()</span>

<span class="nb">IF</span><span class="p">(</span> <span class="s">WITH_MUPDF</span> <span class="p">)</span>
  <span class="nb">ADD_EXECUTABLE</span><span class="p">(</span><span class="s">mupdf_viewer</span>
    <span class="o">${</span><span class="nv">PDFVIEWER_SRCS</span><span class="o">}</span>
    <span class="o">${</span><span class="nv">PDFVIEWER_RESOURCES</span><span class="o">}</span>
  <span class="p">)</span>

  <span class="nb">SET_TARGET_PROPERTIES</span><span class="p">(</span><span class="s">mupdf_viewer</span> <span class="s">PROPERTIES</span>
    <span class="s">COMPILE_FLAGS</span> <span class="s2">&quot;-DUSE_MUPDF ${Qt5Widgets_EXECUTABLE_COMPILE_FLAGS}&quot;</span>
  <span class="p">)</span>

  <span class="nb">TARGET_LINK_LIBRARIES</span><span class="p">(</span><span class="s">mupdf_viewer</span> <span class="s">qtpdf</span><span class="p">)</span>

  <span class="nb">IF</span><span class="p">(</span> <span class="o">${</span><span class="nv">CMAKE_BUILD_TYPE</span><span class="o">}</span> <span class="s">STREQUAL</span> <span class="s2">&quot;Debug&quot;</span> <span class="p">)</span>
    <span class="nb">ADD_EXECUTABLE</span><span class="p">(</span><span class="s">mupdf_test</span>
      <span class="o">${</span><span class="nv">QTPDFTEST_SRCS</span><span class="o">}</span>
    <span class="p">)</span>
    <span class="nb">SET_TARGET_PROPERTIES</span><span class="p">(</span><span class="s">mupdf_test</span> <span class="s">PROPERTIES</span>
      <span class="s">COMPILE_FLAGS</span> <span class="s2">&quot;-DUSE_MUPDF ${Qt5Widgets_EXECUTABLE_COMPILE_FLAGS}&quot;</span>
      <span class="s">RUNTIME_OUTPUT_DIRECTORY</span> <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/unit-tests</span>
    <span class="p">)</span>
    <span class="nb">TARGET_LINK_LIBRARIES</span><span class="p">(</span><span class="s">mupdf_test</span> <span class="o">${</span><span class="nv">QT_TEST_LIBRARIES</span><span class="o">}</span> <span class="s">qtpdf</span><span class="p">)</span>
  <span class="nb">ENDIF</span><span class="p">()</span>
<span class="nb">ENDIF</span><span class="p">()</span>

<span class="nb">ENDIF</span><span class="p">()</span> <span class="c"># QTPDF_VIEWER</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Packaging">&#182;</a>
          <span class="bookmark" id="section-Packaging"></span>
        </div>
        <h1>Packaging</h1>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Summary">&#182;</a>
          <span class="bookmark" id="section-Summary"></span>
        </div>
        <h1>Summary</h1>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-48">&#182;</a>
          <span class="bookmark" id="section-48"></span>
        </div>
        <p>This section displays a nice configuration summary for the user.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-49">&#182;</a>
          <span class="bookmark" id="section-49"></span>
        </div>
        <p>These macros borrowed from the Poppler CMake scripts. They add some nice
formatting to configuration info.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">MACRO</span><span class="p">(</span><span class="s">CONFIG_INFO</span> <span class="s">what</span> <span class="s">value</span><span class="p">)</span>
  <span class="nb">STRING</span><span class="p">(</span><span class="s">LENGTH</span> <span class="o">${</span><span class="nv">what</span><span class="o">}</span> <span class="s">length_what</span><span class="p">)</span>
  <span class="nb">MATH</span><span class="p">(</span><span class="s">EXPR</span> <span class="s">left_char</span> <span class="s2">&quot;35 - ${length_what}&quot;</span><span class="p">)</span>
  <span class="nb">SET</span><span class="p">(</span><span class="s">blanks</span><span class="p">)</span>
  <span class="nb">FOREACH</span><span class="p">(</span><span class="s">_i</span> <span class="s">RANGE</span> <span class="s">1</span> <span class="o">${</span><span class="nv">left_char</span><span class="o">}</span><span class="p">)</span>
    <span class="nb">SET</span><span class="p">(</span><span class="s">blanks</span> <span class="s2">&quot;${blanks} &quot;</span><span class="p">)</span>
  <span class="nb">ENDFOREACH</span><span class="p">()</span>

  <span class="nb">MESSAGE</span><span class="p">(</span><span class="s2">&quot;  ${what}:${blanks} ${value}&quot;</span><span class="p">)</span>
<span class="nb">ENDMACRO</span><span class="p">()</span>

<span class="nb">MACRO</span><span class="p">(</span><span class="s">CONFIG_YESNO</span> <span class="s">what</span> <span class="s">enabled</span><span class="p">)</span>
  <span class="nb">IF</span><span class="p">(</span><span class="o">${</span><span class="nv">enabled</span><span class="o">}</span><span class="p">)</span>
    <span class="nb">SET</span><span class="p">(</span><span class="s">enabled_string</span> <span class="s2">&quot;yes&quot;</span><span class="p">)</span>
  <span class="nb">ELSE</span><span class="p">(</span><span class="o">${</span><span class="nv">enabled</span><span class="o">}</span><span class="p">)</span>
    <span class="nb">SET</span><span class="p">(</span><span class="s">enabled_string</span> <span class="s2">&quot;no&quot;</span><span class="p">)</span>
  <span class="nb">ENDIF</span><span class="p">()</span>

  <span class="nb">CONFIG_INFO</span><span class="p">(</span><span class="s2">&quot;${what}&quot;</span> <span class="s2">&quot;${enabled_string}&quot;</span><span class="p">)</span>
<span class="nb">ENDMACRO</span><span class="p">()</span></pre></div>
      </td>
    </tr>
    <tr>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-50">&#182;</a>
          <span class="bookmark" id="section-50"></span>
        </div>
        <p>Print out configuration summary.</p>

      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">MESSAGE</span><span class="p">(</span><span class="s2">&quot;${PROJECT_NAME} has been configured:\n&quot;</span><span class="p">)</span>

<span class="nb">CONFIG_INFO</span><span class="p">(</span><span class="s2">&quot;Version&quot;</span> <span class="o">${</span><span class="nv">PROJECT_VERSION</span><span class="o">}</span><span class="p">)</span>
<span class="nb">CONFIG_INFO</span><span class="p">(</span><span class="s2">&quot;Qt version&quot;</span> <span class="s2">&quot;${QT_VERSION_MAJOR}.${QT_VERSION_MINOR}.${QT_VERSION_PATCH}&quot;</span><span class="p">)</span>
<span class="nb">CONFIG_INFO</span><span class="p">(</span><span class="s2">&quot;Compiler optimization&quot;</span> <span class="o">${</span><span class="nv">CMAKE_BUILD_TYPE</span><span class="o">}</span><span class="p">)</span>
<span class="nb">message</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

<span class="nb">CONFIG_YESNO</span><span class="p">(</span><span class="s2">&quot;Poppler-Qt backend&quot;</span> <span class="s">WITH_POPPLERQT</span><span class="p">)</span>
<span class="nb">CONFIG_YESNO</span><span class="p">(</span><span class="s2">&quot;MuPDF backend&quot;</span> <span class="s">WITH_MUPDF</span><span class="p">)</span>
<span class="nb">CONFIG_YESNO</span><span class="p">(</span><span class="s2">&quot;Shared library&quot;</span> <span class="s">BUILD_SHARED_LIBS</span><span class="p">)</span>
<span class="nb">CONFIG_YESNO</span><span class="p">(</span><span class="s2">&quot;Viewer application&quot;</span> <span class="s">QTPDF_VIEWER</span><span class="p">)</span>

<span class="nb">message</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="nb">message</span><span class="p">(</span><span class="s2">&quot;  ${PROJECT_NAME} will be installed to:&quot;</span><span class="p">)</span>
<span class="nb">message</span><span class="p">(</span><span class="s2">&quot;      ${CMAKE_INSTALL_PREFIX}&quot;</span><span class="p">)</span>
<span class="nb">message</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span></pre></div>
      </td>
    </tr>
  </table>
</div>

  <!-- Navbar Scripting -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
  <script type="text/javascript">
    var closeMenus;
    closeMenus = function() {
      return $('.navigation.active').removeClass('active');
    };
    $('.navigation').click(function(e) {
      if (e.target.tagName.toLowerCase() === 'a') {
        return;
      }
      if ($(e.target).closest('.repl_wrapper').length) {
        return false;
      }
      if ($(this).hasClass('active')) {
        closeMenus();
      } else {
        closeMenus();
        $(this).addClass('active');
      }
      return false;
    });
  </script>

</body>
</html>
